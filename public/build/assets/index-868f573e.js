import{k as s,o as v,b as E,w as t,p as e,a0 as y,V as C,R as i,x as h,Z as F,c as b,U as R,m as u,F as U,a as L,d as O,as as K}from"./main-4a305e5b.js";import{a as w}from"./axios-d87e70fd.js";import{V as B,a as g}from"./VRow-9020e6a9.js";import{V as A}from"./VTextField-3d54f6b0.js";import{V as $}from"./VSnackbar-2745a5f1.js";import{V as M}from"./VForm-fce6d192.js";import{V as q}from"./VTable-cc495d9a.js";import{V as W,a as I,b as P,c as T}from"./VWindowItem-8029cdb4.js";import"./VCounter-d47b1182.js";import"./forwardRefs-9d31fcaa.js";import"./VOverlay-f2e6ad7c.js";import"./ssrBoot-ed7507ec.js";const Z={__name:"AddLookupEntry",props:{lookUpEntryName:String},emits:["runAfterSubmit"],setup(D,{emit:x}){const p=D,m=s(""),r=s(""),n=s(!1),c=s(""),V=s(""),k=()=>{const S={name:p.lookUpEntryName,code:m.value,description:r.value};w.post("/addnewlookupentry",S).then(a=>{m.value="",r.value="",x("runAfterSubmit"),c.value=a.data.message,n.value=!0,V.value="success"}).catch(a=>{c.value=a,n.value=!0,V.value="error"})};return(S,a)=>(v(),E(M,{onSubmit:F(k,["prevent"])},{default:t(()=>[e(B,null,{default:t(()=>[e(g,{cols:"2"},{default:t(()=>[e(A,{id:"lookUpEntryCode",modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=o=>m.value=o),label:"Code",density:"compact"},null,8,["modelValue"])]),_:1}),e(g,{cols:"8"},{default:t(()=>[e(A,{id:"lookUpEntryDescription",modelValue:r.value,"onUpdate:modelValue":a[1]||(a[1]=o=>r.value=o),label:"Description",density:"compact"},null,8,["modelValue"])]),_:1}),e(g,{cols:"2"},{default:t(()=>[e(y,{type:"submit"},{default:t(()=>[e(C,{start:"",icon:"mdi-add"}),i("Save ")]),_:1})]),_:1})]),_:1}),e($,{modelValue:n.value,"onUpdate:modelValue":a[3]||(a[3]=o=>n.value=o),location:"top center",variant:"flat",color:V.value},{actions:t(()=>[e(y,{color:"white",onClick:a[2]||(a[2]=o=>n.value=!1)},{default:t(()=>[i(" Close ")]),_:1})]),default:t(()=>[i(h(c.value)+" ",1)]),_:1},8,["modelValue","color"])]),_:1},8,["onSubmit"]))}},j=u("thead",null,[u("tr",null,[u("th",{class:"text-uppercase"}," Code "),u("th",{class:"text-uppercase"}," Description "),u("th",{class:"text-uppercase text-center"}," Action ")])],-1),z={class:"text-center"},G={__name:"AddLookupForm",emits:["runAfterSubmit"],setup(D,{emit:x}){const p=s(!1),m=s(""),r=s(""),n=s(""),c=s([{code:"",description:""}]),V=()=>{const a={name:n.value,items:c.value};w.post("/addnewlookup",a).then(o=>{x("runAfterSubmit"),m.value=o.data.message,p.value=!0,r.value="success"}).catch(o=>{m.value=o,p.value=!0,r.value="error"})},k=()=>{c.value.push({code:"",description:""})},S=a=>{c.value.splice(a,1)};return(a,o)=>(v(),b(U,null,[e(M,{onSubmit:F(V,["prevent"])},{default:t(()=>[e(R,{class:"px-3 py-3"},{default:t(()=>[e(A,{id:"lookupName",modelValue:n.value,"onUpdate:modelValue":o[0]||(o[0]=l=>n.value=l),label:"Lookup Name",density:"compact",class:"pb-3",required:""},null,8,["modelValue"]),e(q,{class:"border"},{default:t(()=>[j,u("tbody",null,[(v(!0),b(U,null,L(c.value,(l,_)=>(v(),b("tr",{key:_},[u("td",null,[e(A,{id:"code_"+_,modelValue:l.code,"onUpdate:modelValue":f=>l.code=f,label:"Code",density:"compact",required:""},null,8,["id","modelValue","onUpdate:modelValue"])]),u("td",null,[e(A,{id:"description_"+_,modelValue:l.description,"onUpdate:modelValue":f=>l.description=f,label:"Description",density:"compact",required:""},null,8,["id","modelValue","onUpdate:modelValue"])]),u("td",z,[e(y,{onClick:f=>S(_)},{default:t(()=>[e(C,{start:"",icon:"mdi-delete"}),i(" Remove ")]),_:2},1032,["onClick"])])]))),128))])]),_:1}),e(y,{class:"mt-3 mr-3",onClick:k},{default:t(()=>[e(C,{start:"",icon:"mdi-add"}),i(" Add Item ")]),_:1}),e(y,{class:"mt-3",type:"submit"},{default:t(()=>[e(C,{start:"",icon:"mdi-content-save"}),i(" Save ")]),_:1})]),_:1})]),_:1},8,["onSubmit"]),e($,{modelValue:p.value,"onUpdate:modelValue":o[2]||(o[2]=l=>p.value=l),location:"top center",variant:"flat",color:r.value},{actions:t(()=>[e(y,{color:"white",onClick:o[1]||(o[1]=l=>p.value=!1)},{default:t(()=>[i(" Close ")]),_:1})]),default:t(()=>[i(h(m.value)+" ",1)]),_:1},8,["modelValue","color"])],64))}},H=u("h3",{class:"mb-2"},"LOOKUPS / INDICATORS",-1),J=u("thead",null,[u("tr",null,[u("th",{class:"text-uppercase"}," Code "),u("th",{class:"text-uppercase"}," Description "),u("th",{class:"text-uppercase text-center"}," Action ")])],-1),Q={class:"text-center"},ie=O({__name:"index",setup(D){const x=s(""),p=s([]),m=s([]),r=s(0),n=s(!1),c=s(""),V=s("");K(()=>{k()});async function k(){try{const o=await w.get("/api/lookup");p.value=o.data}catch(o){console.error("Error fetching data:",o)}}async function S(o){try{const l=await w.get("/api/lookup-list",{params:{column_number:o}});m.value=l.data}catch(l){console.error("Error fetching data:",l)}}function a(o,l){const _={name:o,lookupKey:l};w.delete("/households",{data:_}).then(f=>{k(),c.value=f.data.message,n.value=!0,V.value="success"}).catch(f=>{c.value=f.response.data.message,n.value=!0,V.value="error"})}return(o,l)=>{const _=G,f=Z;return v(),E(B,null,{default:t(()=>[e(g,{cols:"12",sm:"4",style:{"max-height":"90vh","overflow-y":"auto"}},{default:t(()=>[H,e(W,{modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=d=>r.value=d),direction:"vertical",class:"v-tabs-pill"},{default:t(()=>[e(I,null,{default:t(()=>[e(C,{start:"",icon:"mdi-plus"}),i(" Create new lookup ")]),_:1}),(v(!0),b(U,null,L(p.value,d=>(v(),E(I,{key:d.id,onClick:N=>S(d.column_number)},{default:t(()=>[e(C,{start:"",icon:"mdi-account-outline"}),i(" "+h(d.lookup_name),1)]),_:2},1032,["onClick"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(g,{cols:"12",sm:"8"},{default:t(()=>[e(P,{modelValue:r.value,"onUpdate:modelValue":l[1]||(l[1]=d=>r.value=d)},{default:t(()=>[e(T,null,{default:t(()=>[e(_,{onRunAfterSubmit:k})]),_:1}),(v(!0),b(U,null,L(p.value,d=>(v(),E(T,{key:d._id},{default:t(()=>[e(R,{class:"px-3 py-3",style:{"max-height":"90vh","overflow-y":"auto"}},{default:t(()=>[e(q,{class:"border"},{default:t(()=>[J,u("tbody",null,[(v(!0),b(U,null,L(m.value,N=>(v(),b("tr",null,[u("td",null,h(N.lookup_key),1),u("td",null,h(N.description),1),u("td",Q,[e(y,{variant:"text",onClick:X=>a(d.name,o.key)},{default:t(()=>[e(C,{icon:"mdi-trash-outline"})]),_:2},1032,["onClick"])])]))),256))])]),_:2},1024),e(f,{class:"my-3","look-up-entry-name":x.value,onRunAfterSubmit:k},null,8,["look-up-entry-name"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1}),e($,{modelValue:n.value,"onUpdate:modelValue":l[3]||(l[3]=d=>n.value=d),location:"top center",variant:"flat",color:V.value},{actions:t(()=>[e(y,{color:"white",onClick:l[2]||(l[2]=d=>n.value=!1)},{default:t(()=>[i(" Close ")]),_:1})]),default:t(()=>[i(h(c.value)+" ",1)]),_:1},8,["modelValue","color"])]),_:1})}}});export{ie as default};
