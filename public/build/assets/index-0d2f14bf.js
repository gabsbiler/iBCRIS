import{l as d,o as V,b as $,w as o,q as e,ae as T,af as g,aH as E,a7 as b,V as L,Y as v,y as A,a4 as R,aa as w,c as S,$ as q,aM as W,n as s,F as D,a as I,d as H,aG as K,a6 as Y}from"./main-ec2ae718.js";import{V as F}from"./VSnackbar-7066dbda.js";import{V as G}from"./VForm-0cdb3b2b.js";import{V as j,a as M,b as z,c as B}from"./VWindowItem-73ac75a9.js";const J={__name:"AddLookupEntry",props:{lookUpEntryId:String},emits:["runAfterSubmit"],setup(N,{emit:C}){const f=N,i=d(""),k=d(""),r=d(!1),c=d(""),p=d(""),h=()=>{const U={lookupid:f.lookUpEntryId,code:i.value,description:k.value};w.post("/api/lookup/entry/add",U).then(t=>{i.value="",k.value="",C("runAfterSubmit",f.lookUpEntryId),c.value=t.data.message,r.value=!0,p.value="success"}).catch(t=>{c.value=t,r.value=!0,p.value="error",console.log(t)})};return(U,t)=>(V(),$(G,{onSubmit:R(h,["prevent"])},{default:o(()=>[e(T,null,{default:o(()=>[e(g,{cols:"2"},{default:o(()=>[e(E,{id:"lookUpEntryCode",modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=u=>i.value=u),label:"Code",density:"compact"},null,8,["modelValue"])]),_:1}),e(g,{cols:"8"},{default:o(()=>[e(E,{id:"lookUpEntryDescription",modelValue:k.value,"onUpdate:modelValue":t[1]||(t[1]=u=>k.value=u),label:"Description",density:"compact"},null,8,["modelValue"])]),_:1}),e(g,{cols:"2"},{default:o(()=>[e(b,{type:"submit"},{default:o(()=>[e(L,{start:"",icon:"mdi-add"}),v("Save ")]),_:1})]),_:1})]),_:1}),e(F,{modelValue:r.value,"onUpdate:modelValue":t[3]||(t[3]=u=>r.value=u),location:"top center",variant:"flat",color:p.value},{actions:o(()=>[e(b,{color:"white",onClick:t[2]||(t[2]=u=>r.value=!1)},{default:o(()=>[v(" Close ")]),_:1})]),default:o(()=>[v(A(c.value)+" ",1)]),_:1},8,["modelValue","color"])]),_:1},8,["onSubmit"]))}},O=s("thead",null,[s("tr",null,[s("th",{class:"text-uppercase"}," Code "),s("th",{class:"text-uppercase"}," Description "),s("th",{class:"text-uppercase text-center"}," Action ")])],-1),P={class:"text-center"},Q={__name:"AddLookupForm",emits:["runAfterSubmit"],setup(N,{emit:C}){const f=d(!1),i=d(""),k=d(""),r=d(""),c=d([{code:"",description:""}]),p=()=>{const t={name:r.value,items:c.value};w.post("/api/lookup/add",t).then(u=>{C("runAfterSubmit"),i.value=u.data.message,f.value=!0,k.value="success"}).catch(u=>{i.value=u,f.value=!0,k.value="error",console.log(u)})},h=()=>{c.value.push({code:"",description:""})},U=t=>{c.value.splice(t,1)};return(t,u)=>(V(),S(D,null,[e(G,{onSubmit:R(p,["prevent"])},{default:o(()=>[e(q,{class:"px-3 py-3"},{default:o(()=>[e(E,{id:"lookupName",modelValue:r.value,"onUpdate:modelValue":u[0]||(u[0]=_=>r.value=_),label:"Lookup Name",density:"compact",class:"pb-3",required:""},null,8,["modelValue"]),e(W,{class:"border"},{default:o(()=>[O,s("tbody",null,[(V(!0),S(D,null,I(c.value,(_,n)=>(V(),S("tr",{key:n},[s("td",null,[e(E,{id:"code_"+n,modelValue:_.code,"onUpdate:modelValue":l=>_.code=l,label:"Code",density:"compact",required:""},null,8,["id","modelValue","onUpdate:modelValue"])]),s("td",null,[e(E,{id:"description_"+n,modelValue:_.description,"onUpdate:modelValue":l=>_.description=l,label:"Description",density:"compact",required:""},null,8,["id","modelValue","onUpdate:modelValue"])]),s("td",P,[e(b,{onClick:l=>U(n)},{default:o(()=>[e(L,{start:"",icon:"mdi-delete"}),v(" Remove ")]),_:2},1032,["onClick"])])]))),128))])]),_:1}),e(b,{class:"mt-3 mr-3",onClick:h},{default:o(()=>[e(L,{start:"",icon:"mdi-add"}),v(" Add Item ")]),_:1}),e(b,{class:"mt-3",type:"submit"},{default:o(()=>[e(L,{start:"",icon:"mdi-content-save"}),v(" Save ")]),_:1})]),_:1})]),_:1},8,["onSubmit"]),e(F,{modelValue:f.value,"onUpdate:modelValue":u[2]||(u[2]=_=>f.value=_),location:"top center",variant:"flat",color:k.value},{actions:o(()=>[e(b,{color:"white",onClick:u[1]||(u[1]=_=>f.value=!1)},{default:o(()=>[v(" Close ")]),_:1})]),default:o(()=>[v(A(i.value)+" ",1)]),_:1},8,["modelValue","color"])],64))}},X=s("h1",{class:"text-h5 mb-3"},"Lookups / Indicators",-1),Z=s("thead",null,[s("tr",null,[s("th",{class:"text-uppercase"}," Code "),s("th",{class:"text-uppercase"}," Description "),s("th",{class:"text-uppercase text-center"}," Action ")])],-1),ee={class:"text-center"},ne=H({__name:"index",setup(N){const C=d(),f=d(""),i=d([]),k=d([]),r=d(!1),c=d(""),p=d("");K(()=>{h()});async function h(){try{const n=await w.get("/api/lookup");i.value=n.data,console.log("hello")}catch(n){console.error("Error fetching data:",n)}}async function U(n){f.value=n;try{const l=await w.get("/api/lookup-list",{params:{lookupid:n}});k.value=l.data}catch(l){console.error("Error fetching data:",l)}}async function t(n,l){const x={lookup_id:n,lookupKey:l};await w.delete("/api/lookup/entry",{data:x}).then(m=>{h(),U(n),c.value=m.data.message,r.value=!0,p.value="success"}).catch(m=>{c.value=m.response.data.message,r.value=!0,p.value="error"})}async function u(n){const l={lookup_id:n};try{const x=await w.delete("/api/lookup",{data:l}).then(m=>{h(),c.value=m.data.message,r.value=!0,p.value="success"})}catch(x){console.error("Error deleting the lookup:",x.response.data)}}async function _(n,l,x){try{const m=await w.put("/api/lookup",{lookup_id:n,column_number:l,lookup_name:x});c.value=m.data.message,r.value=!0,p.value="success"}catch(m){console.error("Error updating the lookup:",m),c.value=m.response.data.message,r.value=!0,p.value="error"}}return(n,l)=>{const x=Q,m=J;return V(),S("div",null,[e(q,null,{default:o(()=>[e(Y,null,{default:o(()=>[X,e(T,null,{default:o(()=>[e(g,{cols:"12",sm:"4",style:{"max-height":"90vh","overflow-y":"auto"}},{default:o(()=>[e(j,{modelValue:C.value,"onUpdate:modelValue":l[0]||(l[0]=a=>C.value=a),direction:"vertical",class:"v-tabs-pill"},{default:o(()=>[e(M,null,{default:o(()=>[e(L,{start:"",icon:"mdi-plus"}),v(" Create new lookup ")]),_:1}),(V(!0),S(D,null,I(i.value,a=>(V(),$(M,{key:a.id,onClick:y=>U(a.id)},{default:o(()=>[e(L,{start:"",icon:"mdi-account-outline"}),v(" "+A("["+a.column_number+"] "+a.lookup_name),1)]),_:2},1032,["onClick"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(g,{cols:"12",sm:"8"},{default:o(()=>[e(z,{modelValue:C.value,"onUpdate:modelValue":l[1]||(l[1]=a=>C.value=a)},{default:o(()=>[e(B,null,{default:o(()=>[e(x,{onRunAfterSubmit:h})]),_:1}),(V(!0),S(D,null,I(i.value,a=>(V(),$(B,{key:a.id},{default:o(()=>[e(q,{class:"px-3 py-3",style:{"max-height":"90vh","overflow-y":"auto"}},{default:o(()=>[e(T,{class:"mb-1"},{default:o(()=>[e(g,{cols:"12",md:"3"},{default:o(()=>[e(E,{label:"Column Number",modelValue:a.column_number,"onUpdate:modelValue":y=>a.column_number=y,density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(g,{cols:"12",md:"7"},{default:o(()=>[e(E,{label:"Column Name",modelValue:a.lookup_name,"onUpdate:modelValue":y=>a.lookup_name=y,density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(g,{cols:"12",md:"2",class:"d-flex gap-x-1"},{default:o(()=>[e(b,{icon:"mdi-content-save",onClick:()=>_(a.id,a.column_number,a.lookup_name)},null,8,["onClick"]),e(b,{icon:"mdi-trash-outline",color:"error",onClick:()=>u(a.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024),e(W,{class:"border"},{default:o(()=>[Z,s("tbody",null,[(V(!0),S(D,null,I(k.value,y=>(V(),S("tr",{key:y.lookup_key},[s("td",null,A(y.lookup_key),1),s("td",null,A(y.description),1),s("td",ee,[e(b,{variant:"text",onClick:oe=>t(y.lookup_id,y.lookup_key)},{default:o(()=>[e(L,{icon:"mdi-trash-outline"})]),_:2},1032,["onClick"])])]))),128))])]),_:1}),e(m,{class:"my-3",lookUpEntryId:f.value,onRunAfterSubmit:U},null,8,["lookUpEntryId"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1}),e(F,{modelValue:r.value,"onUpdate:modelValue":l[3]||(l[3]=a=>r.value=a),location:"top center",variant:"flat",color:p.value},{actions:o(()=>[e(b,{color:"white",onClick:l[2]||(l[2]=a=>r.value=!1)},{default:o(()=>[v(" Close ")]),_:1})]),default:o(()=>[v(A(c.value)+" ",1)]),_:1},8,["modelValue","color"])]),_:1})]),_:1})]),_:1})])}}});export{ne as default};
