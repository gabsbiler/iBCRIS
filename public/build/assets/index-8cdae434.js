import{d as z,r as U,o as P,b as T,w as a,p as e,V as x,k as t,a0 as w,at as E,au as F,R as f,U as R,Z as K,$ as L,q as n,Q as r,av as q,x as H,m as k,as as G,c as Y}from"./main-cf6206e3.js";import{a as D}from"./axios-60a05fd8.js";import{V as Q}from"./VForm-569df249.js";import{V as Z,a as p}from"./VRow-0d54e54c.js";import{V as W}from"./VSelect-e2ced024.js";import{V as I}from"./VTextField-5b43ac53.js";import{V as M}from"./VSpacer-03141c8f.js";import{V as $}from"./VSnackbar-1fa9152e.js";import{V as j}from"./VDialog-68c23def.js";import{V as J}from"./VDataTable-42dd9b23.js";import{V as X}from"./VChip-78e581ef.js";import"./axios-4a70c6fc.js";import"./VCounter-d8f7e966.js";import"./forwardRefs-9d31fcaa.js";import"./VList-f8042727.js";import"./ssrBoot-d4edb8ce.js";import"./VDivider-1ce2e50d.js";import"./VMenu-f3279b4c.js";import"./VOverlay-a275844d.js";import"./VCheckboxBtn-8f56e1d5.js";import"./VTable-add566b6.js";const ee=z({__name:"DialogCloseBtn",props:{icon:{default:"mdi-close"},iconSize:{default:"24"}},setup(A){const V=A;return(h,i)=>{const m=U("IconBtn");return P(),T(m,{class:"v-dialog-close-btn"},{default:a(()=>[e(x,{icon:V.icon,size:V.iconSize},null,8,["icon","size"])]),_:1})}}}),ae=k("h1",{class:"text-subtitle-1 mb-1"},[k("b",null,"Geographic Identification")],-1),le=k("hr",{class:"my-5",style:{opacity:"0.3"}},null,-1),oe=k("h1",{class:"text-subtitle-1 mb-1"},[k("b",null,"Head of Household")],-1),se={__name:"AddHouseholdDialog",emits:["snackbar","refreshTable"],setup(A,{emit:V}){const h=["Alitao","Alupay","Angeles Zone I (Pob.)","Angeles Zone II","Angeles Zone III","Angeles Zone IV","Angustias Zone I (Pob.)","Angustias Zone II","Angustias Zone III,","Angustias Zone IV","Anos","Ayaas","Baguio","Banilad","Calantas","Camaysa","Dapdap","Gibanga","Alsam Ibaba","Bukal Ibaba","Ilasan Ibaba","Nangka Ibaba","Palale Ibaba","Ibas","Alsam Ilaya","Bukal Ilaya","Ilasan Ilaya","Nangka Ilaya","Palale Ilaya","Ipilan","Isabang","Calumpang","Domoit Kanluran","Katigan Kanluran","Palale Kanluran","Lakawan","Lalo","Lawigue","Lita (Pob.)","Malaoa","Masin","Mate","Mateuna","Mayowe","Opias","Pandakaki","Pook","Potol","San Diego Zone I (Pob.)","San Diego Zone II","San Diego Zone III","San Diego Zone IV","San Isidro Zone I (Pob.)","San Isidro Zone II","San Isidro Zone III","San Isidro Zone IV","San Roque Zone I (Pob.)","San Roque Zone II","Domoit Silangan","Katigan Silangan","Palale Silangan","Talolong","Tamlong","Tongko","Valencia","Wakas"],i=t(),m=t(),v=t(),y=t(),g=t(),b=t(),_=t(),u=t(),d=t(),B=t(),N=t(),S=t(!1),s=async()=>{const C={barangay:i.value,sitio:m.value,husn:v.value,bsn:y.value,hsn:g.value,address:b.value,lastname:_.value,firstname:u.value,middlename:d.value};console.log(C),D.post("/api/addHousehold?",C).then(l=>{c(),V("snackbar",{message:l.data.message,type:"success"}),V("refreshTable")}).catch(l=>{V("snackbar",{message:l,type:"error"})})},c=()=>{i.value=null,m.value="",v.value="",y.value="",g.value="",b.value="",_.value="",u.value="",d.value="",S.value=!1};return(C,l)=>{const O=ee;return P(),T(j,{modelValue:n(S),"onUpdate:modelValue":l[13]||(l[13]=o=>r(S)?S.value=o:null),"max-width":"600"},{activator:a(({props:o})=>[e(w,E(F(o)),{default:a(()=>[f(" Add Household ")]),_:2},1040)]),default:a(()=>[e(R,{title:"Add Household Record"},{default:a(()=>[e(O,{variant:"text",size:"small",onClick:l[0]||(l[0]=o=>S.value=!1)}),e(Q,{ref:"refForm",onSubmit:K(()=>{},["prevent"])},{default:a(()=>[e(L,{class:"px-4 pt-0"},{default:a(()=>[ae,e(Z,null,{default:a(()=>[e(p,{cols:"12",md:"6"},{default:a(()=>[e(W,{modelValue:n(i),"onUpdate:modelValue":l[1]||(l[1]=o=>r(i)?i.value=o:null),items:h,label:"Select Baranggay"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12",md:"6"},{default:a(()=>[e(I,{modelValue:n(m),"onUpdate:modelValue":l[2]||(l[2]=o=>r(m)?m.value=o:null),label:"Sitio/Purok"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12",md:"6"},{default:a(()=>[e(I,{modelValue:n(v),"onUpdate:modelValue":l[3]||(l[3]=o=>r(v)?v.value=o:null),label:"Housing Unit Serial Number (HUSN)"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12",md:"6"},{default:a(()=>[e(I,{modelValue:n(y),"onUpdate:modelValue":l[4]||(l[4]=o=>r(y)?y.value=o:null),label:"Building Serial Number (BSN)"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12",md:"6"},{default:a(()=>[e(I,{modelValue:n(g),"onUpdate:modelValue":l[5]||(l[5]=o=>r(g)?g.value=o:null),label:"Household Serial Number (HSN)"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12",md:"6"},{default:a(()=>[e(I,{modelValue:n(b),"onUpdate:modelValue":l[6]||(l[6]=o=>r(b)?b.value=o:null),label:"Address(House No., Street, Zone)"},null,8,["modelValue"])]),_:1})]),_:1}),le,oe,e(Z,null,{default:a(()=>[e(p,{cols:"12"},{default:a(()=>[e(I,{modelValue:n(_),"onUpdate:modelValue":l[7]||(l[7]=o=>r(_)?_.value=o:null),label:"Lastname"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12",md:"6"},{default:a(()=>[e(I,{modelValue:n(u),"onUpdate:modelValue":l[8]||(l[8]=o=>r(u)?u.value=o:null),label:"Firstname"},null,8,["modelValue"])]),_:1}),e(p,{cols:"12",md:"6"},{default:a(()=>[e(I,{modelValue:n(d),"onUpdate:modelValue":l[9]||(l[9]=o=>r(d)?d.value=o:null),label:"Middlename"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(q,null,{default:a(()=>[e(M),e(w,{color:"error",onClick:l[10]||(l[10]=o=>S.value=!1)},{default:a(()=>[f(" Close ")]),_:1}),e(w,{color:"success",onClick:s},{default:a(()=>[f(" Save ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1}),e($,{modelValue:C.isSnackbarSuccessVisible,"onUpdate:modelValue":l[12]||(l[12]=o=>C.isSnackbarSuccessVisible=o),location:"top center",variant:"flat",color:n(N)},{actions:a(()=>[e(w,{color:"white",onClick:l[11]||(l[11]=o=>C.isSnackbarSuccessVisible=!1)},{default:a(()=>[f(" Close ")]),_:1})]),default:a(()=>[f(H(n(B))+" ",1)]),_:1},8,["modelValue","color"])]),_:1},8,["modelValue"])}}},ne=k("h1",{class:"text-h6"}," Household List ",-1),te={class:"d-flex px-auto gap-1"},Ne={__name:"index",setup(A){const V=t(),h=t(),i=t(!1),m=t(),v=t(),y=[{title:"BRGY/PUROK/SITIO",key:"Barangay"},{title:"BSN",key:"BSN"},{title:"HUSN",key:"HUSN"},{title:"HSN",key:"HSN"},{title:"HEAD OF HOUSEHOLD",key:"Head.Lastname"},{title:"COUNT",key:"Count"},{title:"SURVEY STATUS",key:"surveyStatus"},{title:"ACTION",key:"actions"}],g=u=>{m.value=u.message,v.value=u.type,i.value=!0};async function b(){try{const u=await D.get("/api/household");V.value=u.data}catch(u){console.error("Error fetching data:",u)}}const _=async u=>{try{const d=await D.delete("/api/households",{data:{household_id:u}});g({message:"Household successfully deleted",type:"success"}),b()}catch(d){console.error("Error deleting household:",d),g({message:"Error deleting household",type:"error"})}};return G(()=>{b()}),(u,d)=>{const B=se,N=U("IconBtn"),S=U("RouterLink");return P(),Y("section",null,[e(R,null,{default:a(()=>[e(L,{class:"d-flex flex-wrap gap-4"},{default:a(()=>[e(Z,null,{default:a(()=>[e(p,{class:"d-flex align-middle"},{default:a(()=>[ne,e(M),e(I,{modelValue:n(h),"onUpdate:modelValue":d[0]||(d[0]=s=>r(h)?h.value=s:null),density:"compact",label:"Search","append-inner-icon":"mdi-magnify","single-line":"","hide-details":"",dense:"",outlined:"",style:{"max-width":"300px","margin-inline":"0.8rem"}},null,8,["modelValue"]),e(B,{onSnackbar:g,onRefreshTable:b})]),_:1})]),_:1}),e(n(J),{class:"mt-3",headers:y,items:n(V),search:n(h)},{"item.Count":a(({item:s})=>[f(H(s.raw.household_members.length),1)]),"item.Head.Lastname":a(({item:s})=>[f(H(s.raw.household_members.find(c=>c.head==1)?s.raw.household_members.find(c=>c.head==1).demographic.lastname+", "+s.raw.household_members.find(c=>c.head==1).demographic.firstname+" "+s.raw.household_members.find(c=>c.head==1).demographic.middlename:"No Assigned Head"),1)]),"item.surveyStatus":a(({item:s})=>[e(X,{color:s.raw.surveyStatus?"success":"error",class:"font-weight-medium",size:"small"},{default:a(()=>[f(H(s.raw.surveyStatus?"Complete":"Not Completed"),1)]),_:2},1032,["color"])]),"item.actions":a(({item:s})=>[k("div",te,[e(N,{onClick:c=>_(s.raw.id)},{default:a(()=>[e(x,{icon:"mdi-delete-outline"})]),_:2},1032,["onClick"]),e(N,null,{default:a(()=>[e(S,{to:{name:"household-view-id",params:{id:s.raw.id},query:{household_id:s.raw.id}}},{default:a(()=>[e(x,{icon:`
                mdi-information-slab-circle-outline`})]),_:2},1032,["to"])]),_:2},1024)])]),_:1},8,["items","search"])]),_:1}),e($,{modelValue:n(i),"onUpdate:modelValue":d[2]||(d[2]=s=>r(i)?i.value=s:null),location:"top center",variant:"flat",color:n(v)},{actions:a(()=>[e(w,{color:"white",onClick:d[1]||(d[1]=s=>i.value=!1)},{default:a(()=>[f(" Close ")]),_:1})]),default:a(()=>[f(H(n(m))+" ",1)]),_:1},8,["modelValue","color"])]),_:1})])}}};export{Ne as default};
