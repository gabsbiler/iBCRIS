import{_ as S}from"./SnackBar.vue_vue_type_script_setup_true_lang-1315b352.js";import{d as y,l as r,o as V,c as h,q as a,w as e,V as x,Y as f,a7 as m,$ as B,a6 as b,ae as $,af as D,aH as k,s as u,aW as U,U as N,aa as g,n as c}from"./main-27bf03b5.js";import{V as R}from"./VDialog-ca11cea5.js";import{V as T}from"./VDataTableServer-c056a51d.js";import"./VSnackbar-45528893.js";import"./VDataTable-069e871b.js";import"./filter-85954aca.js";const E=y({__name:"AddBarangay",emits:["finish"],setup(C,{emit:p}){const n=r(!1),o=r({name:""}),s=r(!1),_=()=>{n.value=!0},i=async()=>{s.value=!0;try{const d=await g.post("/api/barangays",{barangay:o.value.name});console.log(d.data),o.value.name=""}catch(d){console.log(d)}finally{p("finish"),s.value=!1,n.value=!1}};return(d,t)=>(V(),h("div",null,[a(m,{onClick:_},{default:e(()=>[a(x,{icon:"mdi-plus"}),f(" Add Barangay ")]),_:1}),a(R,{"max-width":"400",modelValue:u(n),"onUpdate:modelValue":t[2]||(t[2]=l=>N(n)?n.value=l:null)},{default:e(()=>[a(B,{title:"Add Barangay"},{default:e(()=>[a(b,null,{default:e(()=>[a($,null,{default:e(()=>[a(D,null,{default:e(()=>[a(k,{label:"Name",modelValue:u(o).name,"onUpdate:modelValue":t[0]||(t[0]=l=>u(o).name=l)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),a(U,{class:"d-flex justify-end"},{default:e(()=>[a(m,{variant:"text",onClick:t[1]||(t[1]=l=>n.value=!1)},{default:e(()=>[f(" Cancel ")]),_:1}),a(m,{variant:"elevated",onClick:i,loading:u(s)},{default:e(()=>[f(" Add ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}}),j={class:"d-flex justify-space-between mb-2 align-center"},F=c("div",null,[c("h6",{class:"text-h6"},"Barangays")],-1),I={class:"d-flex align-center gap-x-3"},q={class:"d-flex gap-x-2"},M=y({__name:"index",setup(C){const p=r(null),n=r([]),o=r(""),s=r(!1),_=[{title:"Barangay",key:"barangay"},{title:"Action",key:"action",sortable:!1}],i=async(t={})=>{s.value=!0;try{const l=await g.get("/api/barangays",{params:{search:o.value,...t}});n.value=l.data}catch(l){console.error("Error fetching data:",l)}finally{s.value=!1}},d=async t=>{s.value=!0;try{await g.delete(`/api/barangays/${t}`),i()}catch(l){console.error("Error deleting barangay:",l)}finally{s.value=!1}};return i(),(t,l)=>{const w=E,A=S;return V(),h("div",null,[a(B,null,{default:e(()=>[a(b,null,{default:e(()=>[a(u(T),{headers:_,items:n.value,loading:s.value,"onUpdate:options":i,search:o.value},{top:e(()=>[c("div",j,[F,c("div",I,[a(k,{modelValue:o.value,"onUpdate:modelValue":l[0]||(l[0]=v=>o.value=v),label:"Search",density:"compact",style:{"min-width":"20rem"}},null,8,["modelValue"]),a(w,{onFinish:i})])])]),"item.action":e(({item:v})=>[c("div",q,[a(m,{icon:"",color:"red",onClick:H=>d(v.raw.id)},{default:e(()=>[a(x,null,{default:e(()=>[f("mdi-trash-outline")]),_:1})]),_:2},1032,["onClick"])])]),_:1},8,["items","loading","search"])]),_:1})]),_:1}),a(A,{ref_key:"SnackBarRef",ref:p},null,512)])}}});export{M as default};
