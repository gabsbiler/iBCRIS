import{_ as B}from"./AppDateTimePicker.vue_vue_type_style_index_0_lang-9e6c1713.js";import{k as c,A as W,S as E,aB as G,r as H,q as t,o as P,b as $,w as s,p as o,U as j,$ as U,Y as z,m as p,a0 as f,V as S,Z as k,R as v,Q as L,x as Y,O}from"./main-4a305e5b.js";import{a as A}from"./axios-d87e70fd.js";import{a as I}from"./avatar-1-3f757947.js";import{a as r,V as x}from"./VRow-9020e6a9.js";import{V as q}from"./VSpacer-6c87578e.js";import{V as J}from"./VForm-fce6d192.js";import{V as g}from"./VTextField-3d54f6b0.js";import{V as u}from"./VSelect-c551eedb.js";import{V as K}from"./VSnackbar-2745a5f1.js";import"./VCounter-d47b1182.js";import"./forwardRefs-9d31fcaa.js";import"./VList-8ef07325.js";import"./ssrBoot-ed7507ec.js";import"./VDivider-f3cf817d.js";import"./dialog-transition-92d1a0d6.js";import"./VMenu-1f398e1c.js";import"./VOverlay-f2e6ad7c.js";import"./VCheckboxBtn-14eb57ab.js";import"./VChip-6f184fc2.js";const Q={class:"d-flex flex-column justify-center gap-4"},Z={class:"d-flex flex-wrap gap-4"},X=p("span",{class:"d-none d-sm-block"},"Upload new photo",-1),ee=p("span",{class:"d-none d-sm-block"},"Reset",-1),le=p("p",{class:"text-xs mb-0"}," Allowed JPG, GIF or PNG. Max size of 800K ",-1),oe=p("b",null," DEMOGRAPHICS CHARACTERISTICS ",-1),ae={class:"mt-5"},we={__name:"demographic",props:{member:Array},setup(F){const l=c(F.member),m=c([]),C=c();let h=c(I);const b=c(),y=c(),_=c(!1),R=n=>{const a=new FileReader,{files:d}=n.target;d&&d.length&&(a.readAsDataURL(d[0]),a.onload=()=>{typeof a.result=="string"&&(h.value=a.result)})};async function D(){try{const n=await A.get("/api/lookup/");m.value=n.data}catch(n){console.error("Error fetching lookups:",n)}}const M=()=>{h.value=I};W();const N=async()=>{l.value.demographic.lastname=null,l.value.demographic.firstname=null,l.value.demographic.middlename=null,l.value.demographic._3=null,l.value.demographic._4=null,l.value.demographic._5=null,l.value.demographic._6=null,l.value.demographic._7=null,l.value.demographic._8=null,l.value.demographic._9=null,l.value.demographic._10=null,l.value.demographic._11=null,l.value.demographic._12a=null,l.value.demographic._12b=null,l.value.demographic._12c=null},w=async()=>{var n,a;try{const d=await A.post("/api/updateMember",l.value.demographic);b.value=d.data.message,_.value=!0,y.value="success"}catch(d){console.error("There was an error updating the member:",d),b.value=((a=(n=d.response)==null?void 0:n.data)==null?void 0:a.message)||"An error occurred",_.value=!0,y.value="error"}},T=E(()=>{if(!l.value.demographic._6)return 0;const n=new Date(l.value.demographic._6),a=new Date;let d=a.getFullYear()-n.getFullYear();const V=a.getMonth()-n.getMonth();return(V<0||V===0&&a.getDate()<n.getDate())&&d--,l.value.demographic._7=d.toString(),d});return G(()=>{D()}),(n,a)=>{const d=H("VText"),V=B;return t(l)&&t(m)?(P(),$(x,{key:0},{default:s(()=>[o(r,{cols:"12"},{default:s(()=>[o(j,null,{default:s(()=>[o(U,{class:"d-flex"},{default:s(()=>[o(z,{rounded:"sm",size:"120",class:"me-6",image:t(h)},null,8,["image"]),p("form",Q,[p("div",Z,[o(f,{color:"primary",onClick:a[0]||(a[0]=i=>{var e;return(e=t(C))==null?void 0:e.click()})},{default:s(()=>[o(S,{icon:"mdi-cloud-upload-outline",class:"d-sm-none"}),X]),_:1}),p("input",{ref_key:"refInputEl",ref:C,type:"file",name:"file",accept:".jpeg,.png,.jpg,GIF",hidden:"",onInput:R},null,544),o(f,{type:"reset",color:"error",variant:"tonal",onClick:M},{default:s(()=>[ee,o(S,{icon:"mdi-refresh",class:"d-sm-none"})]),_:1})]),le]),o(q),o(f,{icon:"mdi-content-save-outline",onClick:k(n.submitForm,["prevent"])},null,8,["onClick"])]),_:1}),o(U,null,{default:s(()=>[o(J,{class:"mt-6",onSubmit:k(w,["prevent"])},{default:s(()=>[p("div",null,[o(d,{class:"text-button"},{default:s(()=>[oe]),_:1}),o(x,{class:"mt-2"},{default:s(()=>[o(r,{md:"4",cols:"12"},{default:s(()=>[o(g,{modelValue:t(l).demographic.lastname,"onUpdate:modelValue":a[1]||(a[1]=i=>t(l).demographic.lastname=i),label:"Last Name"},null,8,["modelValue"])]),_:1}),o(r,{md:"4",cols:"12"},{default:s(()=>[o(g,{modelValue:t(l).demographic.firstname,"onUpdate:modelValue":a[2]||(a[2]=i=>t(l).demographic.firstname=i),label:"First Name"},null,8,["modelValue"])]),_:1}),o(r,{md:"4",cols:"12"},{default:s(()=>[o(g,{modelValue:t(l).demographic.middlename,"onUpdate:modelValue":a[3]||(a[3]=i=>t(l).demographic.middlename=i),label:"Middle Name"},null,8,["modelValue"])]),_:1}),o(r,{cols:"12",md:"4"},{default:s(()=>{var i;return[o(u,{modelValue:t(l).demographic._3,"onUpdate:modelValue":a[4]||(a[4]=e=>t(l).demographic._3=e),label:"(3) How is __ related to household head?",items:(i=t(m).filter(e=>e.column_number==="3")[0])==null?void 0:i.lookup_list.map(e=>({...e,description:e.lookup_key+" - "+e.description})),"item-title":"description","item-value":"lookup_key"},null,8,["modelValue","items"])]}),_:1}),o(r,{cols:"12",md:"4"},{default:s(()=>{var i;return[o(u,{modelValue:t(l).demographic._4,"onUpdate:modelValue":a[5]||(a[5]=e=>t(l).demographic._4=e),label:"(4) Family Nucleus",items:(i=t(m).filter(e=>e.column_number==="4")[0])==null?void 0:i.lookup_list.map(e=>({...e,description:e.lookup_key+" - "+e.description})),"item-title":"description","item-value":"lookup_key"},null,8,["modelValue","items"])]}),_:1}),o(r,{cols:"12",md:"4"},{default:s(()=>{var i;return[o(u,{modelValue:t(l).demographic._5,"onUpdate:modelValue":a[6]||(a[6]=e=>t(l).demographic._5=e),label:"(5) is __ Male or Female",items:(i=t(m).filter(e=>e.column_number==="5")[0])==null?void 0:i.lookup_list.map(e=>({...e,description:e.lookup_key+" - "+e.description})),"item-title":"description","item-value":"lookup_key"},null,8,["modelValue","items"])]}),_:1}),o(r,{cols:"12",md:"4"},{default:s(()=>[o(V,{modelValue:t(l).demographic._6,"onUpdate:modelValue":a[7]||(a[7]=i=>t(l).demographic._6=i),label:"(6) When was ____ born? (mm-dd-yyyy)"},null,8,["modelValue"])]),_:1}),o(r,{cols:"12",md:"4"},{default:s(()=>[o(g,{modelValue:t(l).demographic._7,"onUpdate:modelValue":a[8]||(a[8]=i=>t(l).demographic._7=i),value:t(T),label:"(7) How old is ___ as of his/her last birthday?"},null,8,["modelValue","value"])]),_:1}),o(r,{cols:"12",md:"4"},{default:s(()=>{var i;return[o(u,{modelValue:t(l).demographic._8,"onUpdate:modelValue":a[9]||(a[9]=e=>t(l).demographic._8=e),label:"(8) What __'s citizenship?",items:(i=t(m).filter(e=>e.column_number==="8")[0])==null?void 0:i.lookup_list.map(e=>({...e,description:e.lookup_key+" - "+e.description})),"item-title":"description","item-value":"lookup_key"},null,8,["modelValue","items"])]}),_:1}),o(r,{cols:"12",md:"4"},{default:s(()=>{var i;return[o(u,{modelValue:t(l).demographic._9,"onUpdate:modelValue":a[10]||(a[10]=e=>t(l).demographic._9=e),label:"(9) What is ____'s religion/ religious affiliation?",items:(i=t(m).filter(e=>e.column_number==="9")[0])==null?void 0:i.lookup_list.map(e=>({...e,description:e.lookup_key+" - "+e.description})),"item-title":"description","item-value":"lookup_key"},null,8,["modelValue","items"])]}),_:1}),o(r,{cols:"12",md:"4"},{default:s(()=>{var i;return[o(u,{modelValue:t(l).demographic._10,"onUpdate:modelValue":a[11]||(a[11]=e=>t(l).demographic._10=e),label:"(10) What is ____'s ethnicity?",items:(i=t(m).filter(e=>e.column_number==="10")[0])==null?void 0:i.lookup_list.map(e=>({...e,description:e.lookup_key+" - "+e.description})),"item-title":"description","item-value":"lookup_key"},null,8,["modelValue","items"])]}),_:1}),o(r,{cols:"12",md:"4"},{default:s(()=>{var i;return[o(u,{modelValue:t(l).demographic._11,"onUpdate:modelValue":a[12]||(a[12]=e=>t(l).demographic._11=e),label:"(11) What is __'s highest educational attainment?",items:(i=t(m).filter(e=>e.column_number==="11")[0])==null?void 0:i.lookup_list.map(e=>({...e,description:e.lookup_key+" - "+e.description})),"item-title":"description","item-value":"lookup_key"},null,8,["modelValue","items"])]}),_:1}),o(r,{cols:"12",md:"6"},{default:s(()=>{var i;return[o(u,{modelValue:t(l).demographic._12a,"onUpdate:modelValue":a[13]||(a[13]=e=>t(l).demographic._12a=e),label:"(12a) Is __ currently enrolled?",items:(i=t(m).filter(e=>e.column_number==="12a")[0])==null?void 0:i.lookup_list.map(e=>({...e,description:e.lookup_key+" - "+e.description})),"item-title":"description","item-value":"lookup_key"},null,8,["modelValue","items"])]}),_:1}),o(r,{cols:"12",md:"6"},{default:s(()=>{var i;return[o(u,{modelValue:t(l).demographic._12b,"onUpdate:modelValue":a[14]||(a[14]=e=>t(l).demographic._12b=e),label:"(12b) What type of school is __ on?",items:(i=t(m).filter(e=>e.column_number==="12b")[0])==null?void 0:i.lookup_list.map(e=>({...e,description:e.lookup_key+" - "+e.description})),"item-title":"description","item-value":"lookup_key"},null,8,["modelValue","items"])]}),_:1}),o(r,{cols:"12",md:"12"},{default:s(()=>[o(g,{modelValue:t(l).demographic._12c,"onUpdate:modelValue":a[15]||(a[15]=i=>t(l).demographic._12c=i),label:"(12c) In what baranagay and city/ municipality is __ currently attending school?"},null,8,["modelValue"])]),_:1})]),_:1})]),p("div",ae,[o(x,null,{default:s(()=>[o(r,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:s(()=>[o(f,{onClick:k(w,["prevent"])},{default:s(()=>[v(" Save changes ")]),_:1},8,["onClick"]),o(f,{color:"secondary",variant:"outlined",type:"reset",onClick:k(N,["prevent"])},{default:s(()=>[v(" Reset ")]),_:1},8,["onClick"])]),_:1})]),_:1})])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1}),o(K,{modelValue:t(_),"onUpdate:modelValue":a[17]||(a[17]=i=>L(_)?_.value=i:null),location:"top center",variant:"flat",color:t(y)},{actions:s(()=>[o(f,{color:"white",onClick:a[16]||(a[16]=i=>_.value=!1)},{default:s(()=>[v(" Close ")]),_:1})]),default:s(()=>[v(Y(t(b))+" ",1)]),_:1},8,["modelValue","color"])]),_:1})):O("",!0)}}};export{we as default};
