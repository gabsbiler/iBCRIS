import{_ as W}from"./AppDateTimePicker.vue_vue_type_style_index_0_lang-941392ec.js";import{k as c,A as B,S as E,aF as G,r as $,q as t,o as H,b as P,w as s,p as a,U as j,$ as w,Y as z,m as p,a0 as f,V as U,Z as C,R as k,Q as L,x as Y,O}from"./main-ee999be4.js";import{a as S}from"./axios-60a05fd8.js";import{a as F}from"./avatar-1-3f757947.js";import{a as r,V as y}from"./VRow-b84d81cd.js";import{V as q}from"./VSpacer-d5aad193.js";import{V as J}from"./VForm-5c1e5662.js";import{V as g}from"./VTextField-5e129094.js";import{V as u}from"./VSelect-4a1635ff.js";import{V as K}from"./VSnackbar-9d2e1910.js";import"./axios-4a70c6fc.js";import"./forwardRefs-9d31fcaa.js";import"./VList-24266b93.js";import"./ssrBoot-16871ecf.js";import"./VDivider-81cb78e4.js";import"./VMenu-0cb1867b.js";import"./VOverlay-d1ced1dc.js";import"./VCheckboxBtn-178c9cd1.js";const Q={class:"d-flex flex-column justify-center gap-4"},Z={class:"d-flex flex-wrap gap-4"},X=p("span",{class:"d-none d-sm-block"},"Upload new photo",-1),ee=p("span",{class:"d-none d-sm-block"},"Reset",-1),le=p("p",{class:"text-xs mb-0"}," Allowed JPG, GIF or PNG. Max size of 800K ",-1),oe=p("b",null," DEMOGRAPHICS CHARACTERISTICS ",-1),ae={class:"mt-5"},xe={__name:"demographic",props:{member:Array},setup(A){const l=c(A.member),n=c([]),x=c();let v=c(F);const h=c(),b=c(),_=c(!1),I=m=>{const o=new FileReader,{files:d}=m.target;d&&d.length&&(o.readAsDataURL(d[0]),o.onload=()=>{typeof o.result=="string"&&(v.value=o.result)})};async function R(){try{const m=await S.get("/api/lookup/");n.value=m.data}catch(m){console.error("Error fetching lookups:",m)}}const D=()=>{v.value=F};B();const M=async()=>{l.value.demographic.lastname=null,l.value.demographic.firstname=null,l.value.demographic.middlename=null,l.value.demographic._3=null,l.value.demographic._4=null,l.value.demographic._5=null,l.value.demographic._6=null,l.value.demographic._7=null,l.value.demographic._8=null,l.value.demographic._9=null,l.value.demographic._10=null,l.value.demographic._11=null,l.value.demographic._12a=null,l.value.demographic._12b=null,l.value.demographic._12c=null},N=async()=>{var m,o;try{const d=await S.post("/api/updateMember",l.value.demographic);h.value=d.data.message,_.value=!0,b.value="success"}catch(d){console.error("There was an error updating the member:",d),h.value=((o=(m=d.response)==null?void 0:m.data)==null?void 0:o.message)||"An error occurred",_.value=!0,b.value="error",console.log(d)}},T=E(()=>{if(!l.value.demographic._6)return 0;const m=new Date(l.value.demographic._6),o=new Date;let d=o.getFullYear()-m.getFullYear();const V=o.getMonth()-m.getMonth();return(V<0||V===0&&o.getDate()<m.getDate())&&d--,l.value.demographic._7=d.toString(),d});return G(()=>{R()}),(m,o)=>{const d=$("VText"),V=W;return t(l)&&t(n)?(H(),P(y,{key:0},{default:s(()=>[a(r,{cols:"12"},{default:s(()=>[a(j,null,{default:s(()=>[a(w,{class:"d-flex"},{default:s(()=>[a(z,{rounded:"sm",size:"120",class:"me-6",image:t(v)},null,8,["image"]),p("form",Q,[p("div",Z,[a(f,{color:"primary",onClick:o[0]||(o[0]=i=>{var e;return(e=t(x))==null?void 0:e.click()})},{default:s(()=>[a(U,{icon:"mdi-cloud-upload-outline",class:"d-sm-none"}),X]),_:1}),p("input",{ref_key:"refInputEl",ref:x,type:"file",name:"file",accept:".jpeg,.png,.jpg,GIF",hidden:"",onInput:I},null,544),a(f,{type:"reset",color:"error",variant:"tonal",onClick:D},{default:s(()=>[ee,a(U,{icon:"mdi-refresh",class:"d-sm-none"})]),_:1})]),le]),a(q)]),_:1}),a(w,null,{default:s(()=>[a(J,{class:"mt-6",onSubmit:C(N,["prevent"]),ref:"refForm"},{default:s(()=>[p("div",null,[a(d,{class:"text-button"},{default:s(()=>[oe]),_:1}),a(y,{class:"mt-2"},{default:s(()=>[a(r,{md:"4",cols:"12"},{default:s(()=>[a(g,{modelValue:t(l).demographic.lastname,"onUpdate:modelValue":o[1]||(o[1]=i=>t(l).demographic.lastname=i),label:"Last Name"},null,8,["modelValue"])]),_:1}),a(r,{md:"4",cols:"12"},{default:s(()=>[a(g,{modelValue:t(l).demographic.firstname,"onUpdate:modelValue":o[2]||(o[2]=i=>t(l).demographic.firstname=i),label:"First Name"},null,8,["modelValue"])]),_:1}),a(r,{md:"4",cols:"12"},{default:s(()=>[a(g,{modelValue:t(l).demographic.middlename,"onUpdate:modelValue":o[3]||(o[3]=i=>t(l).demographic.middlename=i),label:"Middle Name"},null,8,["modelValue"])]),_:1}),a(r,{cols:"12",md:"4"},{default:s(()=>{var i;return[a(u,{modelValue:t(l).demographic._3,"onUpdate:modelValue":o[4]||(o[4]=e=>t(l).demographic._3=e),label:"(3) How is __ related to household head?",items:(i=t(n).filter(e=>e.column_number==="3")[0])==null?void 0:i.lookup_list.map(e=>({...e,description:e.lookup_key+" - "+e.description})),"item-title":"description","item-value":"lookup_key"},null,8,["modelValue","items"])]}),_:1}),a(r,{cols:"12",md:"4"},{default:s(()=>{var i;return[a(u,{modelValue:t(l).demographic._4,"onUpdate:modelValue":o[5]||(o[5]=e=>t(l).demographic._4=e),label:"(4) Family Nucleus",items:(i=t(n).filter(e=>e.column_number==="4")[0])==null?void 0:i.lookup_list.map(e=>({...e,description:e.lookup_key+" - "+e.description})),"item-title":"description","item-value":"lookup_key"},null,8,["modelValue","items"])]}),_:1}),a(r,{cols:"12",md:"4"},{default:s(()=>{var i;return[a(u,{modelValue:t(l).demographic._5,"onUpdate:modelValue":o[6]||(o[6]=e=>t(l).demographic._5=e),label:"(5) is __ Male or Female",items:(i=t(n).filter(e=>e.column_number==="5")[0])==null?void 0:i.lookup_list.map(e=>({...e,description:e.lookup_key+" - "+e.description})),"item-title":"description","item-value":"lookup_key"},null,8,["modelValue","items"])]}),_:1}),a(r,{cols:"12",md:"4"},{default:s(()=>[a(V,{modelValue:t(l).demographic._6,"onUpdate:modelValue":o[7]||(o[7]=i=>t(l).demographic._6=i),label:"(6) When was ____ born? (mm-dd-yyyy)"},null,8,["modelValue"])]),_:1}),a(r,{cols:"12",md:"4"},{default:s(()=>[a(g,{modelValue:t(l).demographic._7,"onUpdate:modelValue":o[8]||(o[8]=i=>t(l).demographic._7=i),value:t(T),label:"(7) How old is ___ as of his/her last birthday?"},null,8,["modelValue","value"])]),_:1}),a(r,{cols:"12",md:"4"},{default:s(()=>{var i;return[a(u,{modelValue:t(l).demographic._8,"onUpdate:modelValue":o[9]||(o[9]=e=>t(l).demographic._8=e),label:"(8) What __'s citizenship?",items:(i=t(n).filter(e=>e.column_number==="8")[0])==null?void 0:i.lookup_list.map(e=>({...e,description:e.lookup_key+" - "+e.description})),"item-title":"description","item-value":"lookup_key"},null,8,["modelValue","items"])]}),_:1}),a(r,{cols:"12",md:"4"},{default:s(()=>{var i;return[a(u,{modelValue:t(l).demographic._9,"onUpdate:modelValue":o[10]||(o[10]=e=>t(l).demographic._9=e),label:"(9) What is ____'s religion/ religious affiliation?",items:(i=t(n).filter(e=>e.column_number==="9")[0])==null?void 0:i.lookup_list.map(e=>({...e,description:e.lookup_key+" - "+e.description})),"item-title":"description","item-value":"lookup_key"},null,8,["modelValue","items"])]}),_:1}),a(r,{cols:"12",md:"4"},{default:s(()=>{var i;return[a(u,{modelValue:t(l).demographic._10,"onUpdate:modelValue":o[11]||(o[11]=e=>t(l).demographic._10=e),label:"(10) What is ____'s ethnicity?",items:(i=t(n).filter(e=>e.column_number==="10")[0])==null?void 0:i.lookup_list.map(e=>({...e,description:e.lookup_key+" - "+e.description})),"item-title":"description","item-value":"lookup_key"},null,8,["modelValue","items"])]}),_:1}),a(r,{cols:"12",md:"4"},{default:s(()=>{var i;return[a(u,{modelValue:t(l).demographic._11,"onUpdate:modelValue":o[12]||(o[12]=e=>t(l).demographic._11=e),label:"(11) What is __'s highest educational attainment?",items:(i=t(n).filter(e=>e.column_number==="11")[0])==null?void 0:i.lookup_list.map(e=>({...e,description:e.lookup_key+" - "+e.description})),"item-title":"description","item-value":"lookup_key"},null,8,["modelValue","items"])]}),_:1}),a(r,{cols:"12",md:"6"},{default:s(()=>{var i;return[a(u,{modelValue:t(l).demographic._12a,"onUpdate:modelValue":o[13]||(o[13]=e=>t(l).demographic._12a=e),label:"(12a) Is __ currently enrolled?",items:(i=t(n).filter(e=>e.column_number==="12a")[0])==null?void 0:i.lookup_list.map(e=>({...e,description:e.lookup_key+" - "+e.description})),"item-title":"description","item-value":"lookup_key"},null,8,["modelValue","items"])]}),_:1}),a(r,{cols:"12",md:"6"},{default:s(()=>{var i;return[a(u,{modelValue:t(l).demographic._12b,"onUpdate:modelValue":o[14]||(o[14]=e=>t(l).demographic._12b=e),label:"(12b) What type of school is __ on?",items:(i=t(n).filter(e=>e.column_number==="12b")[0])==null?void 0:i.lookup_list.map(e=>({...e,description:e.lookup_key+" - "+e.description})),"item-title":"description","item-value":"lookup_key"},null,8,["modelValue","items"])]}),_:1}),a(r,{cols:"12",md:"12"},{default:s(()=>[a(g,{modelValue:t(l).demographic._12c,"onUpdate:modelValue":o[15]||(o[15]=i=>t(l).demographic._12c=i),label:"(12c) In what baranagay and city/ municipality is __ currently attending school?"},null,8,["modelValue"])]),_:1})]),_:1})]),p("div",ae,[a(y,null,{default:s(()=>[a(r,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:s(()=>[a(f,{type:"submit",onClick:o[16]||(o[16]=i=>{var e;return(e=m.refForm)==null?void 0:e.validate()})},{default:s(()=>[k(" Save changes ")]),_:1}),a(f,{color:"secondary",variant:"outlined",type:"reset",onClick:C(M,["prevent"])},{default:s(()=>[k(" Reset ")]),_:1},8,["onClick"])]),_:1})]),_:1})])]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1}),a(K,{modelValue:t(_),"onUpdate:modelValue":o[18]||(o[18]=i=>L(_)?_.value=i:null),location:"top center",variant:"flat",color:t(b)},{actions:s(()=>[a(f,{color:"white",onClick:o[17]||(o[17]=i=>_.value=!1)},{default:s(()=>[k(" Close ")]),_:1})]),default:s(()=>[k(Y(t(h))+" ",1)]),_:1},8,["modelValue","color"])]),_:1})):O("",!0)}}};export{xe as default};
