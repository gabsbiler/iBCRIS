import{d as M,r as T,o as x,b as N,w as a,p as e,V as A,k as t,a0 as y,at as O,au as z,R as c,U as L,Z as K,$ as R,q as s,Q as r,av as q,x as w,m as S,as as G,c as $,X as j,aw as Y,D as Q,F as W,a as X,E as J}from"./main-ee999be4.js";import{a as B}from"./axios-60a05fd8.js";import{V as ee}from"./VForm-5c1e5662.js";import{V as D,a as m}from"./VRow-b84d81cd.js";import{V as ae,a as le}from"./VSelect-4a1635ff.js";import{V as b}from"./VTextField-5e129094.js";import{V as oe}from"./VSpacer-d5aad193.js";import{V as E}from"./VSnackbar-9d2e1910.js";import{V as ne}from"./VDialog-63c4d24e.js";import{V as se}from"./VDataTable-c9cda628.js";import"./axios-4a70c6fc.js";import"./forwardRefs-9d31fcaa.js";import"./VList-24266b93.js";import"./ssrBoot-16871ecf.js";import"./VDivider-81cb78e4.js";import"./VMenu-0cb1867b.js";import"./VOverlay-d1ced1dc.js";import"./VCheckboxBtn-178c9cd1.js";import"./VTable-7cca798b.js";const te=M({__name:"DialogCloseBtn",props:{icon:{default:"mdi-close"},iconSize:{default:"24"}},setup(Z){const p=Z;return(H,V)=>{const u=T("IconBtn");return x(),N(u,{class:"v-dialog-close-btn"},{default:a(()=>[e(A,{icon:p.icon,size:p.iconSize},null,8,["icon","size"])]),_:1})}}}),ue=S("h1",{class:"text-subtitle-1 mb-1"},[S("b",null,"Geographic Identification")],-1),ie=S("hr",{class:"my-5",style:{opacity:"0.3"}},null,-1),de=S("h1",{class:"text-subtitle-1 mb-1"},[S("b",null,"Head of Household")],-1),re={__name:"AddHouseholdDialog",emits:["snackbar","refreshTable"],setup(Z,{emit:p}){const H=["Alitao","Alupay","Angeles Zone I (Pob.)","Angeles Zone II","Angeles Zone III","Angeles Zone IV","Angustias Zone I (Pob.)","Angustias Zone II","Angustias Zone III,","Angustias Zone IV","Anos","Ayaas","Baguio","Banilad","Calantas","Camaysa","Dapdap","Gibanga","Alsam Ibaba","Bukal Ibaba","Ilasan Ibaba","Nangka Ibaba","Palale Ibaba","Ibas","Alsam Ilaya","Bukal Ilaya","Ilasan Ilaya","Nangka Ilaya","Palale Ilaya","Ipilan","Isabang","Calumpang","Domoit Kanluran","Katigan Kanluran","Palale Kanluran","Lakawan","Lalo","Lawigue","Lita (Pob.)","Malaoa","Masin","Mate","Mateuna","Mayowe","Opias","Pandakaki","Pook","Potol","San Diego Zone I (Pob.)","San Diego Zone II","San Diego Zone III","San Diego Zone IV","San Isidro Zone I (Pob.)","San Isidro Zone II","San Isidro Zone III","San Isidro Zone IV","San Roque Zone I (Pob.)","San Roque Zone II","Domoit Silangan","Katigan Silangan","Palale Silangan","Talolong","Tamlong","Tongko","Valencia","Wakas"],V=t(),u=t(),f=t(),h=t(),I=t(),k=t(),g=t(),v=t(),C=t(),i=t(),d=t(),_=t(!1),U=async()=>{const o={barangay:V.value,sitio:u.value,husn:f.value,bsn:h.value,hsn:I.value,address:k.value,lastname:g.value,firstname:v.value,middlename:C.value,container_name:"Unassigned"};console.log(o),B.post("/api/addHousehold?",o).then(l=>{P(),p("snackbar",{message:l.data.message,type:"success"}),p("refreshTable")}).catch(l=>{p("snackbar",{message:l.response.data,type:"error"}),console.log(l)})},P=()=>{V.value=null,u.value="",f.value="",h.value="",I.value="",k.value="",g.value="",v.value="",C.value="",_.value=!1};return(o,l)=>{const F=te;return x(),N(ne,{modelValue:s(_),"onUpdate:modelValue":l[13]||(l[13]=n=>r(_)?_.value=n:null),"max-width":"600"},{activator:a(({props:n})=>[e(y,O(z(n)),{default:a(()=>[e(A,{icon:"mdi-plus"}),c(" Household ")]),_:2},1040)]),default:a(()=>[e(L,{title:"Add Household Record"},{default:a(()=>[e(F,{variant:"text",size:"small",onClick:l[0]||(l[0]=n=>_.value=!1)}),e(ee,{ref:"refForm",onSubmit:K(()=>{},["prevent"])},{default:a(()=>[e(R,{class:"px-4 pt-0"},{default:a(()=>[ue,e(D,null,{default:a(()=>[e(m,{cols:"12",md:"6"},{default:a(()=>[e(ae,{modelValue:s(V),"onUpdate:modelValue":l[1]||(l[1]=n=>r(V)?V.value=n:null),items:H,label:"Select Baranggay"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"6"},{default:a(()=>[e(b,{modelValue:s(u),"onUpdate:modelValue":l[2]||(l[2]=n=>r(u)?u.value=n:null),label:"Sitio/Purok"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"6"},{default:a(()=>[e(b,{modelValue:s(f),"onUpdate:modelValue":l[3]||(l[3]=n=>r(f)?f.value=n:null),label:"Housing Unit Serial Number (HUSN)"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"6"},{default:a(()=>[e(b,{modelValue:s(h),"onUpdate:modelValue":l[4]||(l[4]=n=>r(h)?h.value=n:null),label:"Building Serial Number (BSN)"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"6"},{default:a(()=>[e(b,{modelValue:s(I),"onUpdate:modelValue":l[5]||(l[5]=n=>r(I)?I.value=n:null),label:"Household Serial Number (HSN)"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"6"},{default:a(()=>[e(b,{modelValue:s(k),"onUpdate:modelValue":l[6]||(l[6]=n=>r(k)?k.value=n:null),label:"Address(House No., Street, Zone)"},null,8,["modelValue"])]),_:1})]),_:1}),ie,de,e(D,null,{default:a(()=>[e(m,{cols:"12"},{default:a(()=>[e(b,{modelValue:s(g),"onUpdate:modelValue":l[7]||(l[7]=n=>r(g)?g.value=n:null),label:"Lastname"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"6"},{default:a(()=>[e(b,{modelValue:s(v),"onUpdate:modelValue":l[8]||(l[8]=n=>r(v)?v.value=n:null),label:"Firstname"},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"6"},{default:a(()=>[e(b,{modelValue:s(C),"onUpdate:modelValue":l[9]||(l[9]=n=>r(C)?C.value=n:null),label:"Middlename"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(q,null,{default:a(()=>[e(oe),e(y,{color:"error",onClick:l[10]||(l[10]=n=>_.value=!1)},{default:a(()=>[c(" Close ")]),_:1}),e(y,{color:"success",onClick:U},{default:a(()=>[c(" Save ")]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1}),e(E,{modelValue:o.isSnackbarSuccessVisible,"onUpdate:modelValue":l[12]||(l[12]=n=>o.isSnackbarSuccessVisible=n),location:"top center",variant:"flat",color:s(d)},{actions:a(()=>[e(y,{color:"white",onClick:l[11]||(l[11]=n=>o.isSnackbarSuccessVisible=!1)},{default:a(()=>[c(" Close ")]),_:1})]),default:a(()=>[c(w(s(i))+" ",1)]),_:1},8,["modelValue","color"])]),_:1},8,["modelValue"])}}},me={class:"d-flex gap-y-3 flex-column"},ce=S("div",null," Filter ",-1),pe=S("h1",{class:"text-h6"}," Household List ",-1),fe={class:"d-flex px-auto gap-1"},Ze=M({__name:"index",setup(Z){const p=t(!1),H=t(),V=t(),u=t(),f=t(!1),h=t(),I=t(),k=[{title:"Container",key:"household_container.name"},{title:"BRGY/PUROK/SITIO",key:"Barangay"},{title:"BSN",key:"BSN"},{title:"HUSN",key:"HUSN"},{title:"HSN",key:"HSN"},{title:"HEAD OF HOUSEHOLD",key:"Head.Lastname"},{title:"COUNT",key:"Count"},{title:"SURVEY STATUS",key:"surveyStatus"},{title:"ACTION",key:"actions"}],g=i=>{h.value=i.message,I.value=i.type,f.value=!0};async function v(){try{const i=await B.get("/api/household");H.value=i.data}catch(i){console.error("Error fetching data:",i)}try{const i=await B.get("/api/container");V.value=i.data}catch(i){console.error("Error fetching data:",i)}}const C=async i=>{try{const d=await B.delete("/api/households",{data:{household_id:i}});g({message:"Household successfully deleted",type:"success"}),v()}catch(d){console.error("Error deleting household:",d),g({message:"Error deleting household",type:"error"})}};return G(()=>{v()}),(i,d)=>{const _=re,U=T("IconBtn"),P=T("RouterLink");return x(),$("section",me,[e(L,null,{default:a(()=>[e(j,{class:"mt-2 d-flex justify-space-between"},{default:a(()=>[ce,e(y,{icon:s(p)?"mdi-chevron-up":"mdi-chevron-down",onClick:d[0]||(d[0]=o=>p.value=!s(p)),variant:"text"},null,8,["icon"])]),_:1}),e(Y,null,{default:a(()=>[Q(S("div",null,[e(R,null,{default:a(()=>[e(D,null,{default:a(()=>[(x(!0),$(W,null,X(s(V),o=>(x(),N(m,{key:o},{default:a(()=>[s(u)!=o.name?(x(),N(y,{key:0,block:"",variant:"outlined",onClick:()=>{u.value=s(u)===o.name?"":o.name}},{default:a(()=>[c(w(o.name),1)]),_:2},1032,["onClick"])):(x(),N(y,{key:1,block:"",onClick:()=>{u.value=s(u)===o.name?"":o.name}},{default:a(()=>[c(w(o.name),1)]),_:2},1032,["onClick"]))]),_:2},1024))),128))]),_:1})]),_:1})],512),[[J,s(p)]])]),_:1})]),_:1}),e(L,null,{default:a(()=>[e(R,{class:"d-flex flex-wrap gap-4"},{default:a(()=>[e(D,null,{default:a(()=>[e(m,{class:"d-flex align-middle"},{default:a(()=>[pe]),_:1}),e(m,{class:"d-flex justify-end"},{default:a(()=>[e(b,{modelValue:s(u),"onUpdate:modelValue":d[1]||(d[1]=o=>r(u)?u.value=o:null),density:"compact",label:"Search","append-inner-icon":"mdi-magnify","single-line":"","hide-details":"",dense:"",outlined:"",style:{"max-width":"300px","margin-inline":"0.8rem"}},null,8,["modelValue"]),e(_,{onSnackbar:g,onRefreshTable:v})]),_:1})]),_:1}),e(s(se),{class:"mt-3",headers:k,items:s(H),search:s(u),"items-per-page":"12"},{"item.Count":a(({item:o})=>[c(w(o.raw.household_members.length),1)]),"item.Head.Lastname":a(({item:o})=>[c(w(o.raw.household_members.find(l=>l.head==1)?o.raw.household_members.find(l=>l.head==1).demographic.lastname+", "+o.raw.household_members.find(l=>l.head==1).demographic.firstname+" "+o.raw.household_members.find(l=>l.head==1).demographic.middlename:"No Assigned Head"),1)]),"item.surveyStatus":a(({item:o})=>[e(le,{color:o.raw.surveyStatus?"success":"error",class:"font-weight-medium",size:"small"},{default:a(()=>[c(w(o.raw.surveyStatus?"Complete":"Not Completed"),1)]),_:2},1032,["color"])]),"item.actions":a(({item:o})=>[S("div",fe,[e(U,{onClick:l=>C(o.raw.id)},{default:a(()=>[e(A,{icon:"mdi-delete-outline"})]),_:2},1032,["onClick"]),e(U,null,{default:a(()=>[e(P,{to:{name:"household-view-id",params:{id:o.raw.id},query:{household_id:o.raw.id}}},{default:a(()=>[e(A,{icon:`
                mdi-information-slab-circle-outline`})]),_:2},1032,["to"])]),_:2},1024)])]),_:1},8,["items","search"])]),_:1}),e(E,{modelValue:s(f),"onUpdate:modelValue":d[3]||(d[3]=o=>r(f)?f.value=o:null),location:"top center",variant:"flat",color:s(I)},{actions:a(()=>[e(y,{color:"white",onClick:d[2]||(d[2]=o=>f.value=!1)},{default:a(()=>[c(" Close ")]),_:1})]),default:a(()=>[c(w(s(h))+" ",1)]),_:1},8,["modelValue","color"])]),_:1})])}}});export{Ze as default};
