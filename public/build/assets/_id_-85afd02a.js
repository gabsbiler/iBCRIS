import{d as X,o as p,b as j,w as e,p as o,U as A,$ as k,a0 as h,m as i,x as d,R as s,A as Z,j as ee,k as m,as as oe,r as N,c as b,q as t,ac as ae,Y as te,O as w,Q as T,V as L,a$ as le,F as Q,a as se}from"./main-4a305e5b.js";import{V as ne}from"./VDialog-f55c9a38.js";import{a as B}from"./axios-d87e70fd.js";import{a as ie}from"./avatar-1-3f757947.js";import{V as Y,a as $}from"./VRow-9020e6a9.js";import{V as re}from"./VTextField-3d54f6b0.js";import{V as de}from"./VDataTable-d0269d98.js";import{V as I}from"./VChip-6f184fc2.js";import{V as ce}from"./VSnackbar-2745a5f1.js";import"./VOverlay-f2e6ad7c.js";import"./forwardRefs-9d31fcaa.js";import"./dialog-transition-92d1a0d6.js";import"./VCounter-d47b1182.js";import"./VCheckboxBtn-14eb57ab.js";import"./VSelect-c551eedb.js";import"./VList-8ef07325.js";import"./ssrBoot-ed7507ec.js";import"./VDivider-f3cf817d.js";import"./VMenu-1f398e1c.js";import"./VTable-cc495d9a.js";const ue=i("span",{class:"text-5xl"},"!",-1),me={class:"text-lg font-weight-medium"},pe=X({__name:"ConfirmDialog",props:{confirmationQuestion:{},isDialogVisible:{type:Boolean},confirmTitle:{},confirmMsg:{},cancelTitle:{},cancelMsg:{}},emits:["update:isDialogVisible","confirm","cancel"],setup(R,{emit:r}){const v=R,c=f=>{r("update:isDialogVisible",f)},V=()=>{r("confirm",!0),r("cancel",!0),r("update:isDialogVisible",!1)},y=()=>{r("cancel",!0),r("update:isDialogVisible",!1)};return(f,D)=>(p(),j(ne,{"max-width":"500","model-value":v.isDialogVisible,"onUpdate:modelValue":c},{default:e(()=>[o(A,{class:"text-center px-10 py-6"},{default:e(()=>[o(k,null,{default:e(()=>[o(h,{icon:"",variant:"outlined",color:"warning",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:e(()=>[ue]),_:1}),i("h6",me,d(v.confirmationQuestion),1)]),_:1}),o(k,{class:"d-flex align-center justify-center gap-2"},{default:e(()=>[o(h,{variant:"elevated",onClick:V},{default:e(()=>[s(" Confirm ")]),_:1}),o(h,{color:"secondary",variant:"tonal",onClick:y},{default:e(()=>[s(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]))}}),fe="/build/assets/background-1-ceba94e3.jpg";const ge={class:"d-flex h-0"},_e={class:"user-profile-info w-100 mt-16 pt-6 pt-sm-0 mt-sm-0"},he={class:"d-flex align-center justify-center justify-sm-space-between flex-wrap gap-4"},ye={class:"d-flex flex-wrap justify-center justify-sm-start flex-grow-1 gap-5"},be={class:"d-flex align-center"},Ve={class:"d-flex align-center"},xe={class:"d-flex align-center"},we={class:"d-flex align-center"},ke={class:"d-flex px-auto gap-1"},ve={key:0},De={key:1},Ce={key:2},Oe={__name:"[id]",setup(R){const r=Z(),v=ee(),c=m(),V=m(97),y=m(),f=m([]),D=m(!1),C=m(!1),M=m(null),x=m(!1),U=m(),z=m(),F=l=>{U.value=l.message,z.value=l.type,x.value=!0};async function P(){try{const l=r.params.id,n=await B.get("/api/household-list",{params:{id:r.query.household_id}});c.value=n.data}catch(l){console.log(l)}}async function E(){try{const l=await B.get("/api/lookup/");f.value=l.data}catch(l){console.error("Error fetching lookups:",l)}}async function O(){try{const l=await B.post("/api/addMember",{household_id:r.query.household_id});v.push("/household/member/demographics?member_id="+l.data.household_member_id+"&household_id="+r.query.household_id)}catch(l){console.log(l)}}const G=async()=>{try{await B.delete("/api/household/member",{data:{household_member_id:M.value}}),F({message:"Household member successfully deleted",type:"success"}),P()}catch(l){F({message:l.response.data.message,type:"warning"})}M.value=null,C.value=!1},J=l=>{M.value=l,C.value=!0},K=[{title:"Full Name",key:"demographic.lastname"},{title:"Relationship",key:"demographic.relationship"},{title:"Sex",key:"demographic.sex"},{title:"Age",key:"demographic.age"},{title:"Status",key:"demographic.tags"},{title:"Info Progress",key:"Progress"},{title:"Action",key:"actions"}];return oe(()=>{P(),E()}),(l,n)=>{const S=N("VText"),q=pe,H=N("IconBtn"),W=N("RouterLink");return p(),b(Q,null,[t(c)&&t(f)?(p(),j(A,{key:0},{default:e(()=>[o(ae,{src:t(fe),"min-height":"125","max-height":"175",cover:""},null,8,["src"]),o(k,{class:"d-flex align-bottom flex-sm-row flex-column justify-center gap-x-4",style:{"min-height":"125px"}},{default:e(()=>[i("div",ge,[o(te,{rounded:"",size:"125",image:t(ie),class:"user-profile-avatar mx-auto"},null,8,["image"])]),i("div",_e,[i("div",he,[o(Y,null,{default:e(()=>[o($,{cols:"12",sm:"9"},{default:e(()=>[i("div",ye,[i("span",be,[o(S,null,{default:e(()=>[s("Brgy (Purok/Sitio):"),i("b",null,d(t(c).Barangay),1)]),_:1})]),i("span",Ve,[o(S,null,{default:e(()=>[s("BSN:"),i("b",null,d(t(c).BSN),1)]),_:1})]),i("span",xe,[o(S,null,{default:e(()=>[s("HUSN:"),i("b",null,d(t(c).HUSN),1)]),_:1})]),i("span",we,[o(S,null,{default:e(()=>[s("HSN:"),i("b",null,d(t(c).HSN),1)]),_:1})])])]),_:1}),o($,{class:"d-flex",cols:"12",sm:"3"},{default:e(()=>[o(h,{class:"mx-auto",color:"warning"},{default:e(()=>[s(" Completed ")]),_:1})]),_:1})]),_:1})])])]),_:1})]),_:1})):w("",!0),t(c)?(p(),j(A,{key:1,class:"mt-3"},{default:e(()=>[o(k,null,{default:e(()=>[o(Y,null,{default:e(()=>[o($,{"offset-md":"5"},{default:e(()=>[o(re,{modelValue:t(y),"onUpdate:modelValue":n[0]||(n[0]=a=>T(y)?y.value=a:null),density:"compact",label:"Search","append-inner-icon":"mdi-magnify","single-line":"","hide-details":"",dense:"",outlined:""},null,8,["modelValue"])]),_:1}),o(h,{class:"me-3 my-3 d-none d-md-block",color:"primary",onClick:n[1]||(n[1]=a=>D.value=!0)},{default:e(()=>[s(" Add Member ")]),_:1}),o(q,{isDialogVisible:t(D),confirmationQuestion:"Add another member?",onConfirm:O,onCancel:n[2]||(n[2]=a=>D.value=!1)},null,8,["isDialogVisible"]),o(h,{class:"me-3 my-3 d-md-none",color:"primary",icon:"mdi-plus"})]),_:1})]),_:1}),o(k,null,{default:e(()=>[o(t(de),{headers:K,items:t(c).household_members,search:t(y)},{"item.actions":e(({item:a})=>[i("div",ke,[o(H,{onClick:u=>J(a.raw.id)},{default:e(()=>[o(L,{icon:"mdi-delete-outline"})]),_:2},1032,["onClick"]),o(H,null,{default:e(()=>[o(W,{to:{name:"household-member-tab",params:{tab:"demographics"},query:{member_id:a.raw.id,household_id:a.raw.household_id}}},{default:e(()=>[o(L,{icon:`
                mdi-information-slab-circle-outline`})]),_:2},1032,["to"])]),_:2},1024)])]),"item.demographic.lastname":e(({item:a})=>[s(d(a.raw.demographic.lastname+", "+a.raw.demographic.firstname+" "+a.raw.demographic.middlename)+" ",1)]),"item.demographic.relationship":e(({item:a})=>{var u,g;return[s(d(((g=(u=t(f).filter(_=>_.column_number==="3")[0])==null?void 0:u.lookup_list.filter(_=>_.lookup_key===a.raw.demographic._3)[0])==null?void 0:g.description)||"Not Specified"),1)]}),"item.demographic.sex":e(({item:a})=>{var u,g;return[s(d(((g=(u=t(f).filter(_=>_.column_number==="5")[0])==null?void 0:u.lookup_list.filter(_=>_.lookup_key===a.raw.demographic._5)[0])==null?void 0:g.description)||"Not Specified"),1)]}),"item.demographic.age":e(({item:a})=>[s(d(new Date().getFullYear()-new Date(a.raw.demographic._6).getFullYear()-(new Date().getMonth()<new Date(a.raw.demographic._6).getMonth()||new Date().getMonth()===new Date(a.raw.demographic._6).getMonth()&&new Date().getDate()<new Date(a.raw.demographic._6).getDate()?1:0)),1)]),"item.Progress":e(({})=>[o(le,{modelValue:t(V),"onUpdate:modelValue":n[3]||(n[3]=a=>T(V)?V.value=a:null),color:"primary",height:"20"},{default:e(({value:a})=>[i("strong",null,d(Math.ceil(a))+"%",1)]),_:1},8,["modelValue"])]),"item.demographic.tags":e(({item:a})=>[(p(!0),b(Q,null,se(a.raw.demographic.tags.split(","),(u,g)=>(p(),b("span",{key:g},[u.trim()=="alive"?(p(),b("span",ve,[o(I,{color:"success",class:"font-weight-medium",size:"small"},{default:e(()=>[s(" Alive ")]),_:1})])):w("",!0),u.trim()=="teenage_pregnancy"?(p(),b("span",De,[o(I,{color:"gray",class:"font-weight-medium",size:"small"},{default:e(()=>[s(" Teenage Pregnancy ")]),_:1})])):w("",!0),u.trim()=="dead"?(p(),b("span",Ce,[o(I,{color:"error",class:"font-weight-medium",size:"small"},{default:e(()=>[s(" Dead ")]),_:1})])):w("",!0)]))),128))]),_:1},8,["items","search"])]),_:1}),o(q,{isDialogVisible:t(C),confirmationQuestion:"This will be deleted permanently. Are you sure?",onConfirm:G,onCancel:n[4]||(n[4]=a=>C.value=!1)},null,8,["isDialogVisible"]),o(ce,{modelValue:t(x),"onUpdate:modelValue":n[6]||(n[6]=a=>T(x)?x.value=a:null),location:"top center",variant:"flat",color:t(z)},{actions:e(()=>[o(h,{color:"white",onClick:n[5]||(n[5]=a=>x.value=!1)},{default:e(()=>[s(" Close ")]),_:1})]),default:e(()=>[s(d(t(U))+" ",1)]),_:1},8,["modelValue","color"])]),_:1})):w("",!0)],64)}}};export{Oe as default};
