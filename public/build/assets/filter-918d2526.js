import{aQ as b,S as L,k as v,a1 as j,q as K,aC as w,bh as O}from"./main-fc279098.js";const S=(t,r,e)=>t==null||r==null?-1:t.toString().toLocaleLowerCase().indexOf(r.toString().toLocaleLowerCase()),C=b({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function I(t,r,e){var d;const f=[],m=(e==null?void 0:e.default)??S,i=e!=null&&e.filterKeys?w(e.filterKeys):!1,u=Object.keys((e==null?void 0:e.customKeyFilter)??{}).length;if(!(t!=null&&t.length))return f;e:for(let c=0;c<t.length;c++){const a=t[c],h={},n={};let l=-1;if(r&&!(e!=null&&e.noFilter)){if(typeof a=="object"){const k=i||Object.keys(a);for(const F of k){const M=O(a,F,a),y=(d=e==null?void 0:e.customKeyFilter)==null?void 0:d[F];if(l=y?y(M,r,a):m(M,r,a),l!==-1&&l!==!1)y?h[F]=l:n[F]=l;else if((e==null?void 0:e.filterMode)==="every")continue e}}else l=m(a,r,a),l!==-1&&l!==!1&&(n.title=l);const s=Object.keys(n).length,g=Object.keys(h).length;if(!s&&!g||(e==null?void 0:e.filterMode)==="union"&&g!==u&&!s||(e==null?void 0:e.filterMode)==="intersection"&&(g!==u||!s))continue}f.push({index:c,matches:{...n,...h}})}return f}function A(t,r,e,f){const m=L(()=>typeof(e==null?void 0:e.value)!="string"&&typeof(e==null?void 0:e.value)!="number"?"":String(e.value)),i=v([]),u=v(new Map);j(()=>{i.value=[],u.value=new Map;const c=K(r);I(c,m.value,{customKeyFilter:t.customKeyFilter,default:t.customFilter,filterKeys:K(f==null?void 0:f.filterKeys)??t.filterKeys,filterMode:t.filterMode,noFilter:t.noFilter}).forEach(h=>{let{index:n,matches:l}=h;const s=c[n];i.value.push(s),u.value.set(s.value,l)})});function d(c){return u.value.get(c.value)}return{filteredItems:i,filteredMatches:u,getMatches:d}}export{C as m,A as u};
