import{k as d,o as V,b as $,w as o,p as e,a0 as b,V as E,R as v,x as A,Z as R,c as g,U as T,m as s,F as D,a as I,d as Z,as as j,$ as z}from"./main-ee999be4.js";import{a as w}from"./axios-60a05fd8.js";import{V as F,a as S}from"./VRow-b84d81cd.js";import{V as L}from"./VTextField-5e129094.js";import{V as q}from"./VSnackbar-9d2e1910.js";import{V as W}from"./VForm-5c1e5662.js";import{V as K}from"./VTable-7cca798b.js";import{V as G,a as B,b as H,c as M}from"./VWindowItem-c5fc4bf3.js";import"./axios-4a70c6fc.js";import"./forwardRefs-9d31fcaa.js";import"./VOverlay-d1ced1dc.js";import"./ssrBoot-16871ecf.js";const J={__name:"AddLookupEntry",props:{lookUpEntryId:String},emits:["runAfterSubmit"],setup(N,{emit:C}){const f=N,i=d(""),k=d(""),r=d(!1),c=d(""),p=d(""),h=()=>{const U={lookupid:f.lookUpEntryId,code:i.value,description:k.value};w.post("/api/lookup/entry/add",U).then(a=>{i.value="",k.value="",C("runAfterSubmit",f.lookUpEntryId),c.value=a.data.message,r.value=!0,p.value="success"}).catch(a=>{c.value=a,r.value=!0,p.value="error",console.log(a)})};return(U,a)=>(V(),$(W,{onSubmit:R(h,["prevent"])},{default:o(()=>[e(F,null,{default:o(()=>[e(S,{cols:"2"},{default:o(()=>[e(L,{id:"lookUpEntryCode",modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=u=>i.value=u),label:"Code",density:"compact"},null,8,["modelValue"])]),_:1}),e(S,{cols:"8"},{default:o(()=>[e(L,{id:"lookUpEntryDescription",modelValue:k.value,"onUpdate:modelValue":a[1]||(a[1]=u=>k.value=u),label:"Description",density:"compact"},null,8,["modelValue"])]),_:1}),e(S,{cols:"2"},{default:o(()=>[e(b,{type:"submit"},{default:o(()=>[e(E,{start:"",icon:"mdi-add"}),v("Save ")]),_:1})]),_:1})]),_:1}),e(q,{modelValue:r.value,"onUpdate:modelValue":a[3]||(a[3]=u=>r.value=u),location:"top center",variant:"flat",color:p.value},{actions:o(()=>[e(b,{color:"white",onClick:a[2]||(a[2]=u=>r.value=!1)},{default:o(()=>[v(" Close ")]),_:1})]),default:o(()=>[v(A(c.value)+" ",1)]),_:1},8,["modelValue","color"])]),_:1},8,["onSubmit"]))}},O=s("thead",null,[s("tr",null,[s("th",{class:"text-uppercase"}," Code "),s("th",{class:"text-uppercase"}," Description "),s("th",{class:"text-uppercase text-center"}," Action ")])],-1),P={class:"text-center"},Q={__name:"AddLookupForm",emits:["runAfterSubmit"],setup(N,{emit:C}){const f=d(!1),i=d(""),k=d(""),r=d(""),c=d([{code:"",description:""}]),p=()=>{const a={name:r.value,items:c.value};w.post("/api/lookup/add",a).then(u=>{C("runAfterSubmit"),i.value=u.data.message,f.value=!0,k.value="success"}).catch(u=>{i.value=u,f.value=!0,k.value="error",console.log(u)})},h=()=>{c.value.push({code:"",description:""})},U=a=>{c.value.splice(a,1)};return(a,u)=>(V(),g(D,null,[e(W,{onSubmit:R(p,["prevent"])},{default:o(()=>[e(T,{class:"px-3 py-3"},{default:o(()=>[e(L,{id:"lookupName",modelValue:r.value,"onUpdate:modelValue":u[0]||(u[0]=_=>r.value=_),label:"Lookup Name",density:"compact",class:"pb-3",required:""},null,8,["modelValue"]),e(K,{class:"border"},{default:o(()=>[O,s("tbody",null,[(V(!0),g(D,null,I(c.value,(_,n)=>(V(),g("tr",{key:n},[s("td",null,[e(L,{id:"code_"+n,modelValue:_.code,"onUpdate:modelValue":l=>_.code=l,label:"Code",density:"compact",required:""},null,8,["id","modelValue","onUpdate:modelValue"])]),s("td",null,[e(L,{id:"description_"+n,modelValue:_.description,"onUpdate:modelValue":l=>_.description=l,label:"Description",density:"compact",required:""},null,8,["id","modelValue","onUpdate:modelValue"])]),s("td",P,[e(b,{onClick:l=>U(n)},{default:o(()=>[e(E,{start:"",icon:"mdi-delete"}),v(" Remove ")]),_:2},1032,["onClick"])])]))),128))])]),_:1}),e(b,{class:"mt-3 mr-3",onClick:h},{default:o(()=>[e(E,{start:"",icon:"mdi-add"}),v(" Add Item ")]),_:1}),e(b,{class:"mt-3",type:"submit"},{default:o(()=>[e(E,{start:"",icon:"mdi-content-save"}),v(" Save ")]),_:1})]),_:1})]),_:1},8,["onSubmit"]),e(q,{modelValue:f.value,"onUpdate:modelValue":u[2]||(u[2]=_=>f.value=_),location:"top center",variant:"flat",color:k.value},{actions:o(()=>[e(b,{color:"white",onClick:u[1]||(u[1]=_=>f.value=!1)},{default:o(()=>[v(" Close ")]),_:1})]),default:o(()=>[v(A(i.value)+" ",1)]),_:1},8,["modelValue","color"])],64))}},X=s("h1",{class:"text-h5 mb-3"},"Lookups / Indicators",-1),Y=s("thead",null,[s("tr",null,[s("th",{class:"text-uppercase"}," Code "),s("th",{class:"text-uppercase"}," Description "),s("th",{class:"text-uppercase text-center"}," Action ")])],-1),ee={class:"text-center"},ve=Z({__name:"index",setup(N){const C=d(),f=d(""),i=d([]),k=d([]),r=d(!1),c=d(""),p=d("");j(()=>{h()});async function h(){try{const n=await w.get("/api/lookup");i.value=n.data,console.log("hello")}catch(n){console.error("Error fetching data:",n)}}async function U(n){f.value=n;try{const l=await w.get("/api/lookup-list",{params:{lookupid:n}});k.value=l.data}catch(l){console.error("Error fetching data:",l)}}async function a(n,l){const x={lookup_id:n,lookupKey:l};await w.delete("/api/lookup/entry",{data:x}).then(m=>{h(),U(n),c.value=m.data.message,r.value=!0,p.value="success"}).catch(m=>{c.value=m.response.data.message,r.value=!0,p.value="error"})}async function u(n){const l={lookup_id:n};try{const x=await w.delete("/api/lookup",{data:l}).then(m=>{h(),c.value=m.data.message,r.value=!0,p.value="success"})}catch(x){console.error("Error deleting the lookup:",x.response.data)}}async function _(n,l,x){try{const m=await w.put("/api/lookup",{lookup_id:n,column_number:l,lookup_name:x});c.value=m.data.message,r.value=!0,p.value="success"}catch(m){console.error("Error updating the lookup:",m),c.value=m.response.data.message,r.value=!0,p.value="error"}}return(n,l)=>{const x=Q,m=J;return V(),g("div",null,[e(T,null,{default:o(()=>[e(z,null,{default:o(()=>[X,e(F,null,{default:o(()=>[e(S,{cols:"12",sm:"4",style:{"max-height":"90vh","overflow-y":"auto"}},{default:o(()=>[e(G,{modelValue:C.value,"onUpdate:modelValue":l[0]||(l[0]=t=>C.value=t),direction:"vertical",class:"v-tabs-pill"},{default:o(()=>[e(B,null,{default:o(()=>[e(E,{start:"",icon:"mdi-plus"}),v(" Create new lookup ")]),_:1}),(V(!0),g(D,null,I(i.value,t=>(V(),$(B,{key:t.id,onClick:y=>U(t.id)},{default:o(()=>[e(E,{start:"",icon:"mdi-account-outline"}),v(" "+A("["+t.column_number+"] "+t.lookup_name),1)]),_:2},1032,["onClick"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(S,{cols:"12",sm:"8"},{default:o(()=>[e(H,{modelValue:C.value,"onUpdate:modelValue":l[1]||(l[1]=t=>C.value=t)},{default:o(()=>[e(M,null,{default:o(()=>[e(x,{onRunAfterSubmit:h})]),_:1}),(V(!0),g(D,null,I(i.value,t=>(V(),$(M,{key:t.id},{default:o(()=>[e(T,{class:"px-3 py-3",style:{"max-height":"90vh","overflow-y":"auto"}},{default:o(()=>[e(F,{class:"mb-1"},{default:o(()=>[e(S,{cols:"12",md:"3"},{default:o(()=>[e(L,{label:"Column Number",modelValue:t.column_number,"onUpdate:modelValue":y=>t.column_number=y,density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(S,{cols:"12",md:"7"},{default:o(()=>[e(L,{label:"Column Name",modelValue:t.lookup_name,"onUpdate:modelValue":y=>t.lookup_name=y,density:"compact"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(S,{cols:"12",md:"2",class:"d-flex gap-x-1"},{default:o(()=>[e(b,{icon:"mdi-content-save",onClick:()=>_(t.id,t.column_number,t.lookup_name)},null,8,["onClick"]),e(b,{icon:"mdi-trash-outline",color:"error",onClick:()=>u(t.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024),e(K,{class:"border"},{default:o(()=>[Y,s("tbody",null,[(V(!0),g(D,null,I(k.value,y=>(V(),g("tr",{key:y.lookup_key},[s("td",null,A(y.lookup_key),1),s("td",null,A(y.description),1),s("td",ee,[e(b,{variant:"text",onClick:oe=>a(y.lookup_id,y.lookup_key)},{default:o(()=>[e(E,{icon:"mdi-trash-outline"})]),_:2},1032,["onClick"])])]))),128))])]),_:1}),e(m,{class:"my-3",lookUpEntryId:f.value,onRunAfterSubmit:U},null,8,["lookUpEntryId"])]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1}),e(q,{modelValue:r.value,"onUpdate:modelValue":l[3]||(l[3]=t=>r.value=t),location:"top center",variant:"flat",color:p.value},{actions:o(()=>[e(b,{color:"white",onClick:l[2]||(l[2]=t=>r.value=!1)},{default:o(()=>[v(" Close ")]),_:1})]),default:o(()=>[v(A(c.value)+" ",1)]),_:1},8,["modelValue","color"])]),_:1})]),_:1})]),_:1})])}}});export{ve as default};
