import{d as j,l as u,B as I,k as S,o as D,c as L,n,q as e,s,x as f,y as g,w as a,af as i,aq as m,$ as R,a6 as h,a4 as B,ae as b,aH as _,a7 as C,Y as T,E as M,G as N,aa as w}from"./main-ec2ae718.js";import{u as V,b as k}from"./route-block-7b3ad582.js";import{t as E}from"./tree-68e903b5.js";import{V as P}from"./VNodeRenderer-911b9bf5.js";import{V as U}from"./VForm-0cdb3b2b.js";const q="/build/assets/auth-v2-login-illustration-bordered-dark-1621a082.png",F="/build/assets/auth-v2-login-illustration-bordered-light-5efb7928.png",G="/build/assets/auth-v2-login-illustration-dark-c163247b.png",J="/build/assets/auth-v2-login-illustration-light-c910569c.png",O="/build/assets/auth-v2-mask-dark-84239a1b.png",$="/build/assets/auth-v2-mask-light-d0abb54d.png",H={class:"auth-logo d-flex align-start gap-x-3"},W={class:"font-weight-medium leading-normal text-2xl text-uppercase"},Y={class:"d-flex align-center justify-center w-100 pa-10 pe-0"},z=n("h5",{class:"text-h5 font-weight-medium mb-1"}," Welcome to iBCRIS! 👋🏻 ",-1),K=n("p",{class:"mb-0"}," Please sign-in to your account ",-1),Q=j({__name:"login",setup(X){const l=u({email:"",password:"",remember:!1});I(),S();const p=u(!1),r=u(!1),x=V(J,G,F,q,!0),d=u(),y=V($,O),v=async()=>{try{await w.get("/sanctum/csrf-cookie");const o=await w.post("/api/auth/login",{login:l.value.email,password:l.value.password});localStorage.setItem("userData",JSON.stringify(o.data.userData)),localStorage.setItem("accessToken",o.data.accessToken);const t=o.data.userData.role;A(t),t==="brgyEncoder"?window.location.replace("/household"):window.location.replace("/")}catch(o){console.error(o),d.value=o.response.data.message,p.value=!0}},A=o=>{const t=[];o==="admin"?t.push({action:"Access",subject:"Dashboard"},{action:"Access",subject:"Users"},{action:"Access",subject:"Records"},{action:"Access",subject:"Reports"},{action:"Access",subject:"Lookups"},{action:"Access",subject:"MassUpload"},{action:"Access",subject:"RecordBatch"}):o==="brgyAdmin"?t.push({action:"Access",subject:"Dashboard"},{action:"Access",subject:"Records"},{action:"Access",subject:"Reports"}):o==="brgyEncoder"&&t.push({action:"Access",subject:"Records"}),localStorage.setItem("userAbilities",JSON.stringify(t))};return(o,t)=>(D(),L("div",null,[n("div",H,[e(s(P),{nodes:s(f).app.logo},null,8,["nodes"]),n("h1",W,g(s(f).app.title),1)]),e(b,{"no-gutters":"",class:"auth-wrapper"},{default:a(()=>[e(i,{md:"8",class:"d-none d-md-flex align-center justify-center position-relative"},{default:a(()=>[n("div",Y,[e(m,{"max-width":"768px",src:s(x),class:"auth-illustration"},null,8,["src"])]),e(m,{width:276,src:s(E),class:"auth-footer-start-tree"},null,8,["src"]),e(m,{class:"auth-footer-mask",src:s(y)},null,8,["src"])]),_:1}),e(i,{cols:"12",md:"4",class:"auth-card-v2 d-flex align-center justify-center"},{default:a(()=>[e(R,{flat:"","max-width":500,class:"mt-12 mt-sm-0 pa-4"},{default:a(()=>[e(h,null,{default:a(()=>[z,K]),_:1}),e(h,null,{default:a(()=>[e(U,{onSubmit:B(v,["prevent"])},{default:a(()=>[e(b,null,{default:a(()=>[e(i,{cols:"12"},{default:a(()=>[e(_,{modelValue:s(l).email,"onUpdate:modelValue":t[0]||(t[0]=c=>s(l).email=c),label:"Email",type:"email"},null,8,["modelValue"])]),_:1}),e(i,{cols:"12"},{default:a(()=>[e(_,{modelValue:s(l).password,"onUpdate:modelValue":t[1]||(t[1]=c=>s(l).password=c),label:"Password",type:s(r)?"text":"password","append-inner-icon":s(r)?"mdi-eye-off-outline":"mdi-eye-outline","onClick:appendInner":t[2]||(t[2]=c=>r.value=!s(r))},null,8,["modelValue","type","append-inner-icon"])]),_:1}),e(i,null,{default:a(()=>[e(C,{block:"",type:"submit"},{default:a(()=>[T(" Login ")]),_:1}),M(n("p",{class:"text-error mt-1"},g(s(d)?s(d):"Please check your email and password."),513),[[N,s(p)]])]),_:1})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1})]),_:1})]),_:1})]))}});typeof k=="function"&&k(Q);export{Q as default};
